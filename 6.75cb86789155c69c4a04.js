(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{zKAn:function(e,o,t){"use strict";t.r(o),t.d(o,"ProdutoModule",(function(){return J}));var n=t("ofXK"),r=t("3Pt+"),a=t("tyNb"),i=t("dohy"),s=t("fXoL"),l=t("e+EW"),d=t("7zfz"),u=t("QIUk"),p=t("V5BG"),c=t("Ks7X"),b=t("Ji6n"),m=t("jIHw"),f=t("lUkA"),h=t("4m0p");function v(e,o){1&e&&(s.Pb(0,"small",18),s.xc(1,"Selecione um produto."),s.Ob())}function g(e,o){if(1&e){const e=s.Qb();s.Pb(0,"div",19),s.Pb(1,"p-button",20),s.Wb("onClick",(function(){return s.pc(e),s.Yb().prevPage()})),s.Ob(),s.Pb(2,"p-button",21),s.Wb("onClick",(function(){return s.pc(e),s.Yb().nextPage()})),s.Ob(),s.Ob()}if(2&e){const e=s.Yb();s.yb(2),s.ec("disabled",0===e.insumosVinculados.length)}}let P=(()=>{class e{constructor(e,o,t,n){this.service=e,this.messageService=o,this.router=t,this.confirmationService=n,this.formCadastroInsumo=new r.d({nomeInsumo:new r.b({value:""},[r.n.required]),precoInsumo:new r.b({value:0,disabled:!0},[]),insumoAtivo:new r.b({value:!1,disabled:!0},[]),idInsumo:new r.b({value:0,disabled:!0}),autoCompleteNomeInsumo:new r.b("")}),this.insumosVinculados=[],this.headersInsumos=[{fieldName:"nome",labelColumn:"Nome",sortableColumn:!0,typeColumn:i.a.String},{fieldName:"preco",labelColumn:"Pre\xe7o",sortableColumn:!0,typeColumn:i.a.Currency},{fieldName:"ativo",labelColumn:"Ativo",sortableColumn:!1,typeColumn:i.a.Boolean},{fieldName:"",labelColumn:"A\xe7\xf5es",sortableColumn:!1,typeColumn:i.a.ActionsButtons}]}ngOnInit(){this.service.getAllInsumos().subscribe(e=>{this.insumos=e}),this.formCadastroInsumo.reset()}search(e){let o=[],t=e.query;for(let n=0;n<this.insumos.length;n++){let e=this.insumos[n];0==e.nome.toLowerCase().indexOf(t.toLowerCase())&&o.push(e)}this.suggestions=o}selecionaInsumo(e){var o,t,n,r;null===(o=this.precoInsumo)||void 0===o||o.setValue(e.preco),null===(t=this.insumoAtivo)||void 0===t||t.setValue(e.ativo),null===(n=this.idInsumo)||void 0===n||n.setValue(e.id),null===(r=this.nomeInsumo)||void 0===r||r.setValue(e.nome)}prevPage(){this.router.navigate(["produtos/cadastro"])}nextPage(){this.router.navigate(["produtos/cadastro/revisao"])}vincularInsumo(){var e,o,t,n;let r={id:null===(e=this.idInsumo)||void 0===e?void 0:e.value,ativo:null===(o=this.insumoAtivo)||void 0===o?void 0:o.value,nome:null===(t=this.nomeInsumo)||void 0===t?void 0:t.value,preco:null===(n=this.precoInsumo)||void 0===n?void 0:n.value};this.insumosVinculados.filter(e=>e.id===r.id).length>0?this.messageService.add({summary:"Insumo repetido",detail:"N\xe3o \xe9 poss\xedvel adicionar um insumo igual",severity:"error",life:3e3}):(this.insumosVinculados.push(r),this.formCadastroInsumo.reset(),this.suggestions=[])}onEdit(e){console.log("Edit -> "+e.id)}onDelete(e){this.confirmationService.confirm({message:"Tem certeza que deseja excluir?",accept:()=>{console.log("Delete -> "+e.id)}})}get nomeInsumo(){return this.formCadastroInsumo.get("nomeInsumo")}get precoInsumo(){return this.formCadastroInsumo.get("precoInsumo")}get insumoAtivo(){return this.formCadastroInsumo.get("insumoAtivo")}get idInsumo(){return this.formCadastroInsumo.get("idInsumo")}}return e.\u0275fac=function(o){return new(o||e)(s.Jb(l.a),s.Jb(d.g),s.Jb(a.b),s.Jb(d.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-cadastro-insumos-produtos"]],decls:29,vars:10,consts:[[3,"formGroup"],["type","text","formControlName","idInsumo","hidden",""],[1,"p-grid","p-fluid"],[1,"p-col-12","p-md-4"],[1,"p-float-label"],["type","text","formControlName","nomeInsumo","hidden",""],["field","nome","formControlName","autoCompleteNomeInsumo",3,"suggestions","dropdown","required","forceSelection","completeMethod","onSelect"],["for","nome_insumo"],["id","nome_insumo-help","class","p-error",4,"ngIf"],[1,"p-col-12","p-md-3"],["id","preco_insumo","mode","currency","currency","BRL","locale","pt-BR","formControlName","precoInsumo"],["for","preco_insumo"],[1,"p-col-12","p-md-2"],["name","insumo_ativo","label","Ativo","formControlName","insumoAtivo",3,"binary"],["label","Vincular","icon","pi pi-plus","iconPos","right",3,"disabled","onClick"],[1,"p-col-12"],[3,"data","headers","onEdit","onDelete"],["pTemplate","footer"],["id","nome_insumo-help",1,"p-error"],[1,"p-grid","p-nogutter","p-justify-between"],["label","Voltar","icon","pi pi-angle-left","styleClass","p-button-danger",3,"onClick"],["label","Avan\xe7ar","icon","pi pi-angle-right","iconPos","right",3,"disabled","onClick"]],template:function(e,o){1&e&&(s.Pb(0,"form",0),s.Pb(1,"p-card"),s.Pb(2,"h5"),s.xc(3,"Vincula\xe7\xe3o de Insumos"),s.Ob(),s.Kb(4,"br"),s.Kb(5,"input",1),s.Pb(6,"div",2),s.Pb(7,"div",3),s.Pb(8,"span",4),s.Kb(9,"input",5),s.Pb(10,"p-autoComplete",6),s.Wb("completeMethod",(function(e){return o.search(e)}))("onSelect",(function(e){return o.selecionaInsumo(e)})),s.Ob(),s.Pb(11,"label",7),s.xc(12,"Nome do Insumo"),s.Ob(),s.vc(13,v,2,0,"small",8),s.Ob(),s.Ob(),s.Pb(14,"div",9),s.Pb(15,"span",4),s.Kb(16,"p-inputNumber",10),s.Pb(17,"label",11),s.xc(18,"Pre\xe7o"),s.Ob(),s.Ob(),s.Ob(),s.Pb(19,"div",12),s.Kb(20,"p-checkbox",13),s.Ob(),s.Pb(21,"p-button",14),s.Wb("onClick",(function(){return o.vincularInsumo()})),s.Ob(),s.Ob(),s.Kb(22,"br"),s.Pb(23,"p-divider"),s.Pb(24,"h6"),s.xc(25,"Insumos Vinculados"),s.Ob(),s.Ob(),s.Pb(26,"div",15),s.Pb(27,"app-table-responsive",16),s.Wb("onEdit",(function(e){return o.onEdit(e)}))("onDelete",(function(e){return o.onDelete(e)})),s.Ob(),s.Ob(),s.vc(28,g,3,1,"ng-template",17),s.Ob(),s.Ob()),2&e&&(s.ec("formGroup",o.formCadastroInsumo),s.yb(10),s.ec("suggestions",o.suggestions)("dropdown",!0)("required",!0)("forceSelection",!0),s.yb(3),s.ec("ngIf",null==o.nomeInsumo||null==o.nomeInsumo.errors?null:o.nomeInsumo.errors.required),s.yb(7),s.ec("binary",!0),s.yb(1),s.ec("disabled",!o.formCadastroInsumo.valid),s.yb(6),s.ec("data",o.insumosVinculados)("headers",o.headersInsumos))},directives:[r.o,r.j,r.e,u.a,r.a,r.i,r.c,p.a,r.m,n.k,c.a,b.a,m.a,f.a,h.a,d.i],styles:["[_nghost-%COMP%]     .p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width:40rem){[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td{text-align:left;display:block;width:100%;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4em 1em -.4em -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}[_nghost-%COMP%]     .p-datatable-responsive-demo .p-paginator .p-paginator-current{text-align:left;width:100%;float:left;clear:left;border:0}}"]}),e})();var C=t("tk/3"),y=t("z6cu"),O=t("un/a"),I=t("JIr8");let w=(()=>{class e{constructor(e){this.http=e,this.httpOptions={headers:new C.c({"Content-Type":"application/json"})},this.url="https://my-json-server.typicode.com/smagnotto/fake_db/produtos"}getAllProdutos(){return this.http.get(this.url).pipe(Object(O.a)(2),Object(I.a)(this.handleError))}handleError(e){let o="";return o=e.error instanceof ErrorEvent?e.error.message:`C\xf3digo do erro: ${e.status}, menssagem: `+e.message,console.log(o),Object(y.a)(o)}}return e.\u0275fac=function(o){return new(o||e)(s.Tb(C.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const x=function(){return["/produtos/cadastro"]};let k=(()=>{class e{constructor(e){this.service=e,this.produtos=[],this.headers=[{fieldName:"nome",labelColumn:"Nome",sortableColumn:!0,typeColumn:i.a.String},{fieldName:"preco",labelColumn:"Pre\xe7o",sortableColumn:!0,typeColumn:i.a.Currency},{fieldName:"ativo",labelColumn:"Ativo",sortableColumn:!1,typeColumn:i.a.Boolean},{fieldName:"",labelColumn:"A\xe7\xf5es",sortableColumn:!1,typeColumn:i.a.ActionsButtons}],this.isLoading=!1}ngOnInit(){this.getAllProdutos()}getAllProdutos(){this.isLoading=!0,setTimeout(()=>{this.service.getAllProdutos().subscribe(e=>{this.produtos=e,this.isLoading=!1})},5e3)}onEdit(e){console.log("Edit -> "+e.id)}onDelete(e){console.log("Delete -> "+e.id)}}return e.\u0275fac=function(o){return new(o||e)(s.Jb(w))},e.\u0275cmp=s.Db({type:e,selectors:[["app-lista-produtos"]],decls:9,vars:5,consts:[[1,"p-grid"],[1,"p-col-12","p-d-flex","p-jc-start","p-sm-center","p-md-end","p-xl-end"],[1,"p-col-12","p-d-flex","p-jc-end","p-sm-end","p-md-end","p-xl-end"],["pButton","","pRipple","","label","Adicionar","icon","pi pi-plus","routerLinkActive","router-link-exact-active",3,"routerLink"],[1,"p-col-12"],[3,"data","headers","isLoading","onEdit","onDelete"]],template:function(e,o){1&e&&(s.Pb(0,"p-card"),s.Pb(1,"div",0),s.Pb(2,"div",1),s.Pb(3,"h5"),s.xc(4,"Cadastro de Produtos"),s.Ob(),s.Ob(),s.Pb(5,"div",2),s.Kb(6,"button",3),s.Ob(),s.Pb(7,"div",4),s.Pb(8,"app-table-responsive",5),s.Wb("onEdit",(function(e){return o.onEdit(e)}))("onDelete",(function(e){return o.onDelete(e)})),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.yb(6),s.ec("routerLink",s.fc(4,x)),s.yb(2),s.ec("data",o.produtos)("headers",o.headers)("isLoading",o.isLoading))},directives:[u.a,m.b,a.d,a.c,h.a],styles:["[_nghost-%COMP%]     .p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width:40rem){[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td{text-align:left;display:block;width:100%;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4em 1em -.4em -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}[_nghost-%COMP%]     .p-datatable-responsive-demo .p-paginator .p-paginator-current{text-align:left;width:100%;float:left;clear:left;border:0}}"]}),e})();var N=t("7kUa");function _(e,o){1&e&&(s.Pb(0,"small",14),s.xc(1,"Informe o nome do produto."),s.Ob())}function A(e,o){if(1&e){const e=s.Qb();s.Pb(0,"div",15),s.Pb(1,"p-button",16),s.Wb("onClick",(function(){return s.pc(e),s.Yb().cancel()})),s.Ob(),s.Pb(2,"p-button",17),s.Wb("onClick",(function(){return s.pc(e),s.Yb().nextPage()})),s.Ob(),s.Ob()}if(2&e){const e=s.Yb();s.yb(2),s.ec("disabled",!e.formProduto.valid)}}let K=(()=>{class e{constructor(e,o){this.router=e,this.confirmationService=o,this.formProduto=new r.d({nomeProduto:new r.b("",[r.n.required]),precoProduto:new r.b({value:0,disabled:!0}),produtoAtivo:new r.b(!0)})}ngOnInit(){}cancel(){this.confirmationService.confirm({message:"Tem certeza que deseja sair? Os dados ser\xe3o perdidos!",accept:()=>{this.router.navigate(["/produtos"])}})}nextPage(){this.router.navigate(["produtos/cadastro/insumos"])}get nomeProduto(){return this.formProduto.get("nomeProduto")}}return e.\u0275fac=function(o){return new(o||e)(s.Jb(a.b),s.Jb(d.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-produtos-info"]],decls:22,vars:3,consts:[[3,"formGroup"],[1,"p-grid","p-fluid"],[1,"p-col-12","p-md-4"],[1,"p-float-label"],["id","nome_produto","type","text","pInputText","","formControlName","nomeProduto"],["for","nome_produto"],["id","nome_produto-help","class","p-error",4,"ngIf"],[1,"p-col-12","p-md-3"],["id","preco_produto","mode","currency","currency","BRL","locale","pt-BR","formControlName","precoProduto"],["for","preco_produto"],["id","preco_produto-help"],[1,"p-col-12","p-md-2"],["name","produto_ativo","label","Ativo","formControlName","produtoAtivo",3,"binary"],["pTemplate","footer"],["id","nome_produto-help",1,"p-error"],[1,"p-grid","p-nogutter","p-justify-between"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-danger",3,"onClick"],["label","Avan\xe7ar","icon","pi pi-angle-right","iconPos","right",3,"disabled","onClick"]],template:function(e,o){1&e&&(s.Pb(0,"form",0),s.Pb(1,"p-card"),s.Pb(2,"h5"),s.xc(3,"Cadastro de Produtos"),s.Ob(),s.Kb(4,"br"),s.Pb(5,"div",1),s.Pb(6,"div",2),s.Pb(7,"span",3),s.Kb(8,"input",4),s.Pb(9,"label",5),s.xc(10,"Nome do produto"),s.Ob(),s.vc(11,_,2,0,"small",6),s.Ob(),s.Ob(),s.Pb(12,"div",7),s.Pb(13,"span",3),s.Kb(14,"p-inputNumber",8),s.Pb(15,"label",9),s.xc(16,"Pre\xe7o"),s.Ob(),s.Ob(),s.Pb(17,"small",10),s.xc(18,"Valor calculado automaticamente."),s.Ob(),s.Ob(),s.Pb(19,"div",11),s.Kb(20,"p-checkbox",12),s.Ob(),s.Ob(),s.vc(21,A,3,1,"ng-template",13),s.Ob(),s.Ob()),2&e&&(s.ec("formGroup",o.formProduto),s.yb(11),s.ec("ngIf",null==o.nomeProduto||null==o.nomeProduto.errors?null:o.nomeProduto.errors.required),s.yb(9),s.ec("binary",!0))},directives:[r.o,r.j,r.e,u.a,r.a,N.a,r.i,r.c,n.k,c.a,b.a,d.i,m.a],styles:[""]}),e})();var L=t("KcHJ"),j=t("Gxio"),M=t("Nf9I");const D=[{path:"",component:k},{path:"cadastro",component:(()=>{class e{constructor(){}ngOnInit(){this.items=[{label:"Produto",routerLink:"/cadastro"},{label:"Insumos",routerLink:"/insumos"},{label:"Revis\xe3o",routerLink:"/revisao"}]}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=s.Db({type:e,selectors:[["app-produtos-steps"]],decls:5,vars:2,consts:[[1,"card"],[3,"model","readonly"],["header","Confirma\xe7\xe3o","icon","pi pi-exclamation-triangle","acceptLabel","Sim","rejectLabel","N\xe3o","defaultFocus","N\xe3o","rejectButtonStyleClass","p-button-danger"]],template:function(e,o){1&e&&(s.Pb(0,"div",0),s.Kb(1,"p-steps",1),s.Ob(),s.Kb(2,"p-toast"),s.Kb(3,"p-confirmDialog",2),s.Kb(4,"router-outlet")),2&e&&(s.yb(1),s.ec("model",o.items)("readonly",!0))},directives:[L.a,j.a,M.a,a.g],styles:[""]}),e})(),children:[{path:"",component:K},{path:"insumos",component:P}]}];let E=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(o){return new(o||e)},imports:[[a.f.forChild(D)],a.f]}),e})();var S=t("ThbA"),V=t("Xt7b");let J=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(o){return new(o||e)},providers:[w],imports:[[n.b,E,S.a,r.l,r.f,V.a]]}),e})()}}]);